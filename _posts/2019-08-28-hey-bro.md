---
layout: post
title: Hey Bro...heard
image: https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative.png
---

<div class="blogpost-body">
	<p>On March 22, 2019 we released Apache NiFi MiNiFi C++ 0.6.0 . This brings a lot of features that I can&#8217;t begin to cover in a single post [1].</p>
<p>There is one in particular I&#8217;ve been using quite a bit for rapid prototyping: Python processors [1]. We have a simple example in our code base called SentimentAnalysis [1]. This is a simple processor that performs a sentiment analysis on incoming text from the content of a flow file. It provides a score from 0.0 to 1.0 that indicates if the text is neutral, positive, or negative. This processor requires nltk and VaderSentiment to be installed via pip/</p>
<p>With the introduction of Python processors I hope that developers can quickly create and deploy features written in Python to MiNiFi C++. The most important aspect is that Python processors are easy to add, remove, and run. The default configuration defines a subdirectory, minifi-python. Simply place your Python processors into this directory. The file name will be the processor name defined as the class in your flow.</p>
<p>To demonstrate this I&#8217;ve written a short flow ( at the end of this post ) that uses our sentiment analyzer. The flow simply pulls data from a directory on my file system, using GetFile. These flow files are then sent through the Sentiment Analyzer, which is written in python, and then logged with LogAttribute.</p>
<p>My test files are short in nature. Here is the example output from LogAttribute with a negatively scored payload.</p>
<figure id="attachment_439" aria-describedby="caption-attachment-439" style="width: 1476px" class="wp-caption aligncenter"><img class="wp-image-439 size-full" src="https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative.png" alt="" width="1476" height="480" srcset="https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative.png 1476w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative-300x98.png 300w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative-768x250.png 768w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004639/negative-1024x333.png 1024w" sizes="(max-width: 1476px) 100vw, 1476px" /><figcaption id="caption-attachment-439" class="wp-caption-text">Negative Analysis</figcaption></figure>
<p>As you can see the sentiment analysis provides different scores for a more positive payload. VaderSentiment with its default set does a good job at scoring text. I encourage you to read more about nltk and it sentiment analyzers.</p>
<figure id="attachment_441" aria-describedby="caption-attachment-441" style="width: 1535px" class="wp-caption aligncenter"><img class="wp-image-441 size-full" src="https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004808/positive.png" alt="" width="1535" height="478" srcset="https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004808/positive.png 1535w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004808/positive-300x93.png 300w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004808/positive-768x239.png 768w, https://s3.amazonaws.com/pioimages/wp-content/uploads/2019/03/27004808/positive-1024x319.png 1024w" sizes="(max-width: 1535px) 100vw, 1535px" /><figcaption id="caption-attachment-441" class="wp-caption-text">Positive Analysis</figcaption></figure>
<h2>What is required?</h2>
<p>Python processors simply require that you implement a describe, on Initialize, and onTrigger functions [1]. On The describe function allows us to provide a description of your processor to the framework. The onInitialize function allows you to specify whether your processor supports dynamic properties and the properties that make up your processor. The YAML will configure your processor as it would any C++ or Java processor implemented with our JNI capabilities.</p>
<h2>What does it all mean?</h2>
<p>It&#8217;s a little unfair to couch this as a rapid prototyping feature. I think many will use it as such; however, these processors function in the same way C++ or Java processors do. They&#8217;re simply function calls into bound functions. There will be added cost, but it&#8217;s likely not beyond that of your I/O. As a result you should be able to use Python processors in your every day flows.</p>
<p>The example I provided is short but demonstrates how you can access your Python processors. In any case,  if a dependency for your Python script does not exist we will not allow that processor to be loaded. In the future we hope to improve namespace references via the flow. If you look at the example flow, below, the class name is defined as <strong>org.apache.nifi.minifi.processors.SentimentAnalysis. </strong>In future releases we&#8217;ll improve how we isolate and reference Python processors.</p>
<p>Feel free to give it a try and if you have any issues let me know. I encourage you to use one of our binary releases to give it a try.</p>
<p>[1] <a href="https://github.com/apache/nifi-minifi-cpp/blob/master/extensions/script/README.md">https://github.com/apache/nifi-minifi-cpp/blob/master/extensions/script/README.md</a></p>
<p>[2] <a href="https://github.com/apache/nifi-minifi-cpp/blob/master/extensions/pythonprocessors/SentimentAnalysis.py">https://github.com/apache/nifi-minifi-cpp/blob/master/extensions/pythonprocessors/SentimentAnalysis.py</a></p>
<p>[3] <a href="https://nifi.apache.org/minifi/download.html">https://nifi.apache.org/minifi/download.html</a></p>
